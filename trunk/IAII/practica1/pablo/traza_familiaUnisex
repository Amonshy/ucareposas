TRUE
CLIPS> 
(clear)
CLIPS> (deffacts initial-fact
	;;Matrimonios
	(esposos Sofia Juan)
	(esposos Calixta Mateo)
	(esposos Clara Joao)
	(esposos Julia Mario)	
	;;Paternidad
	(padre Juan Carlos)
	(madre Sofia Carlos)
	(padre Juan Mateo)
	(madre Sofia Mateo)
	(padre Juan Clara)
	(madre Sofia Clara)
	(padre Mateo Amancio)
	(madre Calixta Amancio)
	(padre Mateo Amanda)
	(madre Sofia Amanda)
	(padre Joao Pepito)
	(madre Clara Pepito)
	(padre Joao Julia)
	(madre Clara Julia)
	(padre Mario Julieta)
	(madre Julia Julieta)
	(padre Mario Juanete)
	(madre Julia Juanete)
	;;Hermandad
	(hermanode Carlos Mateo Clara)
	(hermanode Mateo Clara Carlos)
	(hermanode Clara Carlos Mateo)
	(hermanode Amancio Amanda)
	(hermanode Amanda Amancio)
	(hermanode Pepito Julia)
	(hermanode Julia Pepito)
	(hermanode Julieta Juanete)
	(hermanode Juanete Julieta))
CLIPS> (reset)
CLIPS> 

;;Reglas establecidas

(defrule reglaTios
	(or 
	  (and (or (hermanode $? ?x $? ?p $?) (hermanode $? ?p $? ?x $?))
	       (or (padre ?p ?s) (madre ?p ?s))
	  )
	  (and (or (esposos ?x ?y) (esposos ?y ?x))
	       (or (hermanode $? ?y $? ?p $?) (hermanode $? ?p $? ?y $?))
	       (or (padre ?p ?s) (madre ?p ?s))
	  )	  	
	)
	=>
	(assert (tio ?x ?s)))
CLIPS> 
(defrule reglaSobrinos
	(tio ?t ?s)
	=>
	(assert (sobrino ?s ?t)))
CLIPS> 	

(defrule reglaPrimos
	(tio ?t ?p)
	(or (padre ?t ?x) (madre ?t ?x))
	(not (primo ?p ?x)) ;; Para no repetir en distinto orden
	=>
	(assert (primo ?x ?p)))
CLIPS> 
(defrule reglaAbuelos
	(esposos ?x ?y)
	(padre ?y ?h)
	(madre ?x ?h)
	(or (padre ?h ?n) (madre ?h ?n))
	=>
	(assert (abuelo ?x ?n))
	(assert (abuelo ?y ?n)))
CLIPS> 
(defrule reglaNietos
	(abuelo ?a ?n)
	=>
	(assert (nieto ?n)))
CLIPS> 
(defrule reglaBisabuelo
	(esposos ?x ?y)
	(abuelo ?x ?n)
	(abuelo ?y ?n)
	(or (padre ?n ?bn) (madre ?n ?bn))
	=>
	(assert (bisabuelo ?x ?bn))
	(assert (bisabuelo ?y ?bn)))
CLIPS> 
(run)
CLIPS> (facts)
f-0     (esposos Sofia Juan)
f-1     (esposos Calixta Mateo)
f-2     (esposos Clara Joao)
f-3     (esposos Julia Mario)
f-4     (padre Juan Carlos)
f-5     (madre Sofia Carlos)
f-6     (padre Juan Mateo)
f-7     (madre Sofia Mateo)
f-8     (padre Juan Clara)
f-9     (madre Sofia Clara)
f-10    (padre Mateo Amancio)
f-11    (madre Calixta Amancio)
f-12    (padre Mateo Amanda)
f-13    (madre Sofia Amanda)
f-14    (padre Joao Pepito)
f-15    (madre Clara Pepito)
f-16    (padre Joao Julia)
f-17    (madre Clara Julia)
f-18    (padre Mario Julieta)
f-19    (madre Julia Julieta)
f-20    (padre Mario Juanete)
f-21    (madre Julia Juanete)
f-22    (hermanode Carlos Mateo Clara)
f-23    (hermanode Mateo Clara Carlos)
f-24    (hermanode Clara Carlos Mateo)
f-25    (hermanode Amancio Amanda)
f-26    (hermanode Amanda Amancio)
f-27    (hermanode Pepito Julia)
f-28    (hermanode Julia Pepito)
f-29    (hermanode Julieta Juanete)
f-30    (hermanode Juanete Julieta)
f-31    (abuelo Sofia Julia)
f-32    (abuelo Juan Julia)
f-33    (nieto Julia)
f-34    (bisabuelo Sofia Juanete)
f-35    (bisabuelo Juan Juanete)
f-36    (bisabuelo Sofia Julieta)
f-37    (bisabuelo Juan Julieta)
f-38    (abuelo Sofia Pepito)
f-39    (abuelo Juan Pepito)
f-40    (nieto Pepito)
f-41    (abuelo Sofia Amanda)
f-42    (abuelo Juan Amanda)
f-43    (nieto Amanda)
f-44    (abuelo Sofia Amancio)
f-45    (abuelo Juan Amancio)
f-46    (nieto Amancio)
f-47    (abuelo Clara Juanete)
f-48    (abuelo Joao Juanete)
f-49    (nieto Juanete)
f-50    (abuelo Clara Julieta)
f-51    (abuelo Joao Julieta)
f-52    (nieto Julieta)
f-53    (tio Pepito Juanete)
f-54    (sobrino Juanete Pepito)
f-55    (tio Pepito Julieta)
f-56    (sobrino Julieta Pepito)
f-57    (tio Carlos Julia)
f-58    (sobrino Julia Carlos)
f-59    (tio Carlos Pepito)
f-60    (sobrino Pepito Carlos)
f-61    (tio Clara Amanda)
f-62    (primo Julia Amanda)
f-63    (primo Pepito Amanda)
f-64    (sobrino Amanda Clara)
f-65    (tio Clara Amancio)
f-66    (primo Julia Amancio)
f-67    (primo Pepito Amancio)
f-68    (sobrino Amancio Clara)
f-69    (tio Mateo Julia)
f-70    (sobrino Julia Mateo)
f-71    (tio Mateo Pepito)
f-72    (sobrino Pepito Mateo)
f-73    (tio Calixta Julia)
f-74    (sobrino Julia Calixta)
f-75    (tio Calixta Pepito)
f-76    (sobrino Pepito Calixta)
f-77    (tio Joao Amanda)
f-78    (sobrino Amanda Joao)
f-79    (tio Joao Amancio)
f-80    (sobrino Amancio Joao)
f-81    (tio Carlos Amanda)
f-82    (sobrino Amanda Carlos)
f-83    (tio Carlos Amancio)
f-84    (sobrino Amancio Carlos)
For a total of 85 facts.
CLIPS> (dribble-off)
